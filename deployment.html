<!DOCTYPE html>
<html lang="en">
  <head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">

    <!-- Basic -->
    <title>Deployment Guide | Vulcan Docs</title>
    <meta name="description" content>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="images/favicon.ico" sizes="16x16 32x32 64x64">

    <!-- Social -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://docs.vulcanjs.org">
    <meta property="og:title" content="Deployment Guide | Vulcan Docs">
    <meta property="og:description" content>
    <meta property="og:image" content>
    <meta name="twitter:card" content="summary_image_large">
    <meta name="twitter:site" content="@vulcanjs">
    <meta name="twitter:title" content="Deployment Guide | Vulcan Docs">
    <meta name="twitter:description" content>
    <meta name="twitter:image" content>

    <!-- Misc -->
    <meta name="google-site-verification" content>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,200,300italic,400italic" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/style/style.css">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css">


  </head>
  <body class>
    

<div class="nav dark">
  <div class="nav-group">
    <div class="nav-item show-mobile">
      <span class="js-sidebar-toggle ">
        <span class="icon-menu"></span>
      </span>
    </div>
    <div class="nav-item">
      <a class="logo-wrapper" href="https://docs.vulcanjs.org/" title="Vulcan Documentation Vulcan Documentation">
        <img src="/images/vulcan-logo-border-2.svg" alt="Vulcan Documentation" class="logo">
        <span>Vulcan Documentation</span>
      </a>
    </div>
  </div>

  <div class="nav-group right">

    <div class="nav-item wrapper-search">
      <div class="input-symbol small round">
        <input type="text" placeholder="Search Vulcan Docs" id="desktop-search-input">
        <span class="icon-search"></span>
      </div>
      <div class="wrapper-desktop-search-results"></div>
    </div>

    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="https://github.com/vulcanjs/vulcan">
          <span>GitHub</span>
        </a>
      </div>
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="http://slack.vulcanjs.org">
          <span>Slack</span>
        </a>
      </div>
    
  </div>
</div>

<div class="sidebar">
  <div class="panel">
    <div class="panel-item">
      <a class href="https://docs.vulcanjs.org/" title="Vulcan Documentation">
        <span>Vulcan Documentation Vulcan Documentation</span>
      </a>
    </div>
    
      <div class="panel-item " ">
        <a class href="https://github.com/vulcanjs/vulcan">
          <span>GitHub</span>
        </a>
      </div>
    
      <div class="panel-item " ">
        <a class href="http://slack.vulcanjs.org">
          <span>Slack</span>
        </a>
      </div>
    
  </div>

  <div class="sidebar-content">
    <div class="topcap">
      
    </div>

    <ul class="toc">
      
        <li>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="index.html" class="sidebar-link ">
                  <span>Read Me</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="nutshell.html" class="sidebar-link ">
                  <span>Vulcan in a Nutshell</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="cheatsheet.html" class="sidebar-link ">
                  <span>Cheatsheet</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="file-architecture.html" class="sidebar-link ">
                  <span>File Architecture</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="toc.html" class="sidebar-link ">
                  <span>Table of Contents</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Schemas</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="schemas.html" class="sidebar-link ">
                  <span>Schemas & Collections</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="schema-properties.html" class="sidebar-link ">
                  <span>Schema Properties</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="field-resolvers.html" class="sidebar-link ">
                  <span>Field Resolvers</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="relations.html" class="sidebar-link ">
                  <span>Relations</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">GraphQL API</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="graphql-schema.html" class="sidebar-link ">
                  <span>GraphQL Schema</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="queries.html" class="sidebar-link ">
                  <span>Queries</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="filtering.html" class="sidebar-link ">
                  <span>Filtering</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="mutations.html" class="sidebar-link ">
                  <span>Mutations</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="fragments.html" class="sidebar-link ">
                  <span>Fragments</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="server-queries.html" class="sidebar-link ">
                  <span>Querying on the Server</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="connecting-remotely.html" class="sidebar-link ">
                  <span>Connecting Remotely</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Features</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="routing.html" class="sidebar-link ">
                  <span>Routing</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="settings.html" class="sidebar-link ">
                  <span>Settings</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="groups-permissions.html" class="sidebar-link ">
                  <span>Groups & Permissions</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="callbacks.html" class="sidebar-link ">
                  <span>Callbacks</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="users.html" class="sidebar-link ">
                  <span>Users</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="internationalization.html" class="sidebar-link ">
                  <span>Internationalization</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="head-tags.html" class="sidebar-link ">
                  <span>Head Tags</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="errors.html" class="sidebar-link ">
                  <span>Errors & Messages</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Components</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="components.html" class="sidebar-link ">
                  <span>Components</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="ui-components.html" class="sidebar-link ">
                  <span>UI Components</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="datatable.html" class="sidebar-link ">
                  <span>Datatable</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="card.html" class="sidebar-link ">
                  <span>Card</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="forms-components.html" class="sidebar-link ">
                  <span>Form Components</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="other-components.html" class="sidebar-link ">
                  <span>Other Components</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Forms</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="forms.html" class="sidebar-link ">
                  <span>Forms</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="decorators.html" class="sidebar-link ">
                  <span>Field Decorators</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="forms-custom.html" class="sidebar-link ">
                  <span>Custom Form Components</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Server</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="performance.html" class="sidebar-link ">
                  <span>Performance</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="database.html" class="sidebar-link ">
                  <span>Database Layer</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Other Packages</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="packages.html" class="sidebar-link ">
                  <span>Packages Types</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="email.html" class="sidebar-link ">
                  <span>Email</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="events.html" class="sidebar-link ">
                  <span>Analytics & Event Tracking</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="error-tracking.html" class="sidebar-link ">
                  <span>Error Tracking</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="debug.html" class="sidebar-link ">
                  <span>Debugging</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Testing</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="unit-testing.html" class="sidebar-link ">
                  <span>Unit Testing</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="storybook.html" class="sidebar-link ">
                  <span>Storybook</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Resources</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="learn.html" class="sidebar-link ">
                  <span>Learn More</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="examples.html" class="sidebar-link ">
                  <span>Examples</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="common-problems.html" class="sidebar-link ">
                  <span>Common Problems</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="plugins.html" class="sidebar-link ">
                  <span>Plugins</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="themes.html" class="sidebar-link ">
                  <span>Themes</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="tutorials.html" class="sidebar-link ">
                  <span>Tutorials</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="videos.html" class="sidebar-link ">
                  <span>Videos</span>
                </a>
              </li>
            
          </ul>
        </li>
      
    </ul>
  </div>
</div>

<div class="content">
  <div class="content-wrapper">
    <div class="header-content">
      <h1 class="title-page">Deployment Guide</h1>
      

      <div class="page-actions">
        <div class="actions-group">
          <a class="btn tertiary small round lowercase" href="https://github.com/vulcanjs/vulcan-docs/tree/master/source/deployment.md" target="_blank"><span class="icon-github"></span> <span>Edit on GitHub</span></a>
          
        </div>
      </div>
    </div>

    <div class="document-formatting">
      <p>This guide is written to get your Vulcan app deployed and running on a remote server.<br>Deploying a Vulcan app is much like deploying a <a href="https://guide.meteor.com/deployment" target="_blank" rel="noopener">Meteor</a> app. If something isn’t addressed here, it might be in the official documentation.</p>
<h2 id="Meteor-Up"><a href="#Meteor-Up" class="headerlink" title="Meteor Up"></a>Meteor Up</h2><p>The recommended way to deploy Vulcan is by using <a href="http://meteor-up.com/" target="_blank" rel="noopener">Meteor Up</a>.</p>
<h3 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h3><p>You should have a Linux server online, for instance <a href="https://www.digitalocean.com" target="_blank" rel="noopener">a Digital Ocean droplet running with Ubuntu</a>.</p>
<blockquote>
<p>Here’s a guide to a <a href="https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-16-04" target="_blank" rel="noopener">good initial server setup</a>.</p>
</blockquote>
<hr>
<p>On your local development machine, install the latest <a href="https://www.npmjs.com/package/mup" target="_blank" rel="noopener">Meteor Up release</a>.</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span> -g mup</span><br></pre></td></tr></table></figure>

<p>Create Meteor Up configuration files in your project directory with <code>mup init</code>. In the example below, the configuration files are created in a <code>.deploy</code> directory at the root of your app.</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> my-app-folder</span><br><span class="line">mkdir <span class="string">.deploy</span></span><br><span class="line"><span class="keyword">cd</span> <span class="string">.deploy</span></span><br><span class="line">mup init</span><br></pre></td></tr></table></figure>

<p>This will create two files:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mup<span class="selector-class">.js</span> - Meteor Up configuration file</span><br><span class="line">settings<span class="selector-class">.json</span> - Settings <span class="keyword">for</span> Meteor<span class="string">'s settings API</span></span><br></pre></td></tr></table></figure>

<p>Then, replace the content of the newly created <code>settings.json</code> with your own settings (you can use the content of <code>sample_settings.json</code> as a starter).</p>
<p>To quickly get up and running, copy/paste the following configuration and edit it to reflect your environment:</p>
<p>Please refer to the official <a href="http://meteor-up.com/getting-started.html" target="_blank" rel="noopener">Meteor Up starting guide</a> for more in-depth instructions.</p>
<blockquote>
<p>The official <a href="http://meteor-up.com/docs.html#example-configs" target="_blank" rel="noopener">mup.js configuration examples and the possible options are found here</a>.</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  servers: &#123;</span><br><span class="line">    one: &#123;</span><br><span class="line">      <span class="comment">// <span class="doctag">TODO:</span> set host address, username, and authentication method</span></span><br><span class="line">      host: <span class="string">'123.123.321.321'</span>,</span><br><span class="line">      username: <span class="string">'server-username'</span>,</span><br><span class="line">      <span class="comment">// pem: '/home/user/.ssh/id_rsa',</span></span><br><span class="line">      <span class="comment">// password: 'server-password'</span></span><br><span class="line">      <span class="comment">// or neither for authenticate from ssh-agent</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// If I'm not using a default SSH port, declare which here:</span></span><br><span class="line">      <span class="comment">//   opts: &#123;</span></span><br><span class="line">      <span class="comment">//     port: 2222,</span></span><br><span class="line">      <span class="comment">//   &#125;,</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  app: &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> change app name and path</span></span><br><span class="line">    name: <span class="string">'myAppName'</span>,</span><br><span class="line">    path: <span class="string">'../'</span>,</span><br><span class="line"></span><br><span class="line">    servers: &#123;</span><br><span class="line">      one: &#123;&#125;,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">   <span class="comment">// All options are optional.</span></span><br><span class="line">    buildOptions: &#123;</span><br><span class="line">      <span class="comment">// Set to true to skip building mobile apps</span></span><br><span class="line">      <span class="comment">// but still build the web.cordova architecture. (recommended)</span></span><br><span class="line">      serverOnly: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">      executable: <span class="string">'meteor'</span>,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    env: &#123;</span><br><span class="line">      <span class="comment">// <span class="doctag">TODO:</span> Change to your app's url</span></span><br><span class="line">      <span class="comment">// If you are using ssl, it needs to start with https://</span></span><br><span class="line">      ROOT_URL: <span class="string">'https://mydomain.example'</span>,</span><br><span class="line">      MONGO_URL: <span class="string">'mongodb://mongodb/meteor'</span>,</span><br><span class="line">      MONGO_OPLOG_URL: <span class="string">'mongodb://mongodb/local'</span>,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    docker: &#123;</span><br><span class="line">      <span class="comment">// change to 'abernix/meteord:base' if your app is using Meteor 1.4 - 1.5</span></span><br><span class="line">      image: <span class="string">'zodern/meteor:root'</span>,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Show progress bar while uploading bundle to server</span></span><br><span class="line">    <span class="comment">// You might need to disable it on CI servers</span></span><br><span class="line">    enableUploadProgressBar: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  mongo: &#123;</span><br><span class="line">    servers: &#123;</span><br><span class="line">      one: &#123;&#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  proxy: &#123;</span><br><span class="line">    <span class="comment">// comma-separated list of domains your website</span></span><br><span class="line">    <span class="comment">// will be accessed at.</span></span><br><span class="line">    <span class="comment">// You will need to configure your DNS for each one.</span></span><br><span class="line">    domains: <span class="string">'mydomain.example'</span>,</span><br><span class="line">    ssl: &#123;</span><br><span class="line">      <span class="comment">// <span class="doctag">TODO:</span> disable if not using SSL</span></span><br><span class="line">      forceSSL: <span class="literal">true</span>,</span><br><span class="line">      <span class="comment">// Enable let's encrypt to create free certificates</span></span><br><span class="line">      letsEncryptEmail: <span class="string">'my-active-contact@email.com'</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>You do not have to edit the mongo settings unless you are using a custom database setup.</p>
</blockquote>
<h3 id="Setup-your-server"><a href="#Setup-your-server" class="headerlink" title="Setup your server"></a>Setup your server</h3><p>From the <code>./deploy</code> folder, you can now set up the remote servers you have specified in your config.<br>It will take around 2-5 minutes depending on the server’s performance and network availability.</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mup <span class="built_in">setup</span></span><br></pre></td></tr></table></figure>

<h3 id="Deploy-your-app"><a href="#Deploy-your-app" class="headerlink" title="Deploy your app"></a>Deploy your app</h3><p>Still in the <code>./deploy</code> folder, to deploy your app with your settings file:</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mup <span class="keyword">deploy</span> <span class="params">--settings</span> settings.json</span><br></pre></td></tr></table></figure>

<p>This will bundle the Meteor project locally and deploy it to the remote server(s). The bundling process is the same as what meteor deploy does.</p>
<p>If you are using the <a href="http://docs.vulcanjs.org/#Two-Repo-Install-Optional">two-repo install</a> you must specify the path to your package directory:</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">METEOR_PACKAGE_DIRS</span>=<span class="string">"/Users/sacha/Vulcan/packages"</span> mup deploy --settings settings.json</span><br></pre></td></tr></table></figure>

<p>(Taking care to adapt the <code>/Users/sacha/Vulcan/packages</code> path to point to your Vulcan core repo’s <code>/packages</code> directory)</p>
<h3 id="Utility-Commands"><a href="#Utility-Commands" class="headerlink" title="Utility Commands"></a>Utility Commands</h3><ul>
<li><code>mup reconfig</code> - reconfigures app with new environment variables, Meteor settings, and it updates the start script. This is also the last step of mup deploy.</li>
<li><code>mup stop</code> - stop the app</li>
<li><code>mup start</code> - start the app</li>
<li><code>mup restart</code> - restart the app</li>
<li><code>mup logs [-f --tail=50]</code> - view the app’s logs. Supports all of the flags from <code>docker logs</code>.</li>
</ul>
<hr>
<h3 id="Troubleshooting"><a href="#Troubleshooting" class="headerlink" title="Troubleshooting"></a>Troubleshooting</h3><blockquote>
<p>Official docs on <a href="http://meteor-up.com/docs" target="_blank" rel="noopener">deploying with Meteor Up</a></p>
</blockquote>
<ul>
<li><a href="http://meteor-up.com/docs.html#troubleshooting" target="_blank" rel="noopener">Troubleshooting docs</a></li>
<li><a href="http://meteor-up.com/docs.html#common-problems" target="_blank" rel="noopener">Common problems</a></li>
<li><code>meteor npm install --save bcrypt</code>.</li>
<li>Increase <code>deployCheckWaitTime</code>.</li>
</ul>
<hr>
<h2 id="Meteor-Now"><a href="#Meteor-Now" class="headerlink" title="Meteor Now"></a>Meteor Now</h2><p>Another simple option to get your app live for no cost is by using <a href="https://github.com/jkrup/meteor-now" target="_blank" rel="noopener">Meteor Now</a>.<br>Meteor-now is a tool to let you instantly deploy your Meteor apps with one command using ZEIT’s <a href="http://zeit.co/now" target="_blank" rel="noopener">▲now</a> service.</p>
<h3 id="Configuration-1"><a href="#Configuration-1" class="headerlink" title="Configuration"></a>Configuration</h3><p>Install the <code>now</code> and <code>meteor-now</code> packages:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span> -g <span class="keyword">now</span> meteor-<span class="keyword">now</span></span><br></pre></td></tr></table></figure>

<p>Create now account</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ now <span class="comment">--login</span></span><br><span class="line">&gt; Enter your email: &lt;your email&gt;</span><br><span class="line">&gt; Please follow <span class="keyword">the</span> link sent <span class="built_in">to</span> &lt;your email&gt; <span class="built_in">to</span> <span class="built_in">log</span> <span class="keyword">in</span>.</span><br><span class="line">&gt; Verify that <span class="keyword">the</span> provided security code <span class="keyword">in</span> <span class="keyword">the</span> email matches Pragmatic Manta Ray.</span><br><span class="line"></span><br><span class="line">✔ Confirmed email address!</span><br><span class="line"></span><br><span class="line">&gt; Logged <span class="keyword">in</span> successfully. Token saved <span class="keyword">in</span> ~/.now.json</span><br></pre></td></tr></table></figure>

<h3 id="Deploy"><a href="#Deploy" class="headerlink" title="Deploy"></a>Deploy</h3><p>Now on your root folder, run the following command:</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meteor-now -d -e <span class="attribute">ROOT_URL</span>=https://mydomain.now.sh -e <span class="attribute">NODE_ENV</span>=production`</span><br></pre></td></tr></table></figure>

<p>Change <code>mydomain</code> with your custom domain name. <code>meteor-now</code> will automatically look for a file named <code>production.settings.json</code> at the root of your application. For a staging deployment, you can also set <code>NODE_ENV=development</code>, <code>meteor-now</code> will then look for <code>development.settings.json</code> instead.</p>
<p>You can also add <code>-e MONGO_URL=mongodb://&lt;username&gt;:&lt;pass&gt;@....</code> for persistance storage of data. We recommend you using a service like <a href="https://mlab.com/" target="_blank" rel="noopener">mlab</a>.</p>
<p>If you are using the <a href="http://docs.vulcanjs.org/#Two-Repo-Install-Optional">two-repo install</a> you must specify the path to your package directory:</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">METEOR_PACKAGE_DIRS</span>=<span class="string">"/Users/sacha/Vulcan/packages"</span> meteor-now ...</span><br></pre></td></tr></table></figure>

<p>(Taking care to adapt the <code>/Users/sacha/Vulcan/packages</code> path to point to your Vulcan core repo’s <code>/packages</code> directory)</p>
<p>Note that the <code>METEOR_PACKAGE_DIRS</code> variable is only used locally by the machine that runs<code>meteor-now</code> during build, you <strong>must not</strong> send it to the server with the <code>-e</code> option, contrary to other variables.</p>
<p>After your deployment is done, create an alias to the domain you just specified. Just copy the hashed link provided by the now deployment. It should be copied to your clipboad. It usually follows this format: <code>https://xxxxxxxxx.now.sh</code>.</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">now alias <span class="keyword">set</span> http<span class="variable">s:</span>//xxxxxxxxx.now.<span class="keyword">sh</span> http<span class="variable">s:</span>//mydomain.now.<span class="keyword">sh</span></span><br></pre></td></tr></table></figure>

<p>That’s it! now visit <code>https://mydomain.now.sh</code>.</p>
<p>For more info, for how to get a custom domain name run <code>now -h</code>. You may need a premium <a href="http://zeit.co/now" target="_blank" rel="noopener">now</a> account.</p>
<h2 id="PM2"><a href="#PM2" class="headerlink" title="PM2"></a>PM2</h2><p>Contributed by <a href="https://github.com/VulcanJS/Vulcan/issues/1552#issuecomment-276948862" target="_blank" rel="noopener">adalidda</a>.</p>
<p>Deploy Vulcan GraphQL/Apollo version with PM2</p>
<h3 id="Server-Setup"><a href="#Server-Setup" class="headerlink" title="Server Setup"></a>Server Setup</h3><p>On Ubuntu 14 or better.</p>
<h4 id="Install-nvm"><a href="#Install-nvm" class="headerlink" title="Install nvm"></a>Install nvm</h4><p>Run the following command</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="built_in">get</span> <span class="keyword">update</span></span><br><span class="line">sudo apt-<span class="built_in">get</span> install build-essential libssl-dev</span><br><span class="line">curl -sL http<span class="variable">s:</span>//raw.githubusercontent.<span class="keyword">com</span>/creationix/nvm/v0.<span class="number">31.0</span>/install.<span class="keyword">sh</span> -<span class="keyword">o</span> install_nvm.<span class="keyword">sh</span></span><br><span class="line">bash install_nvm.<span class="keyword">sh</span></span><br><span class="line"><span class="keyword">source</span> ~/.<span class="keyword">profile</span></span><br><span class="line">nvm install <span class="number">4.7</span>.<span class="number">3</span></span><br><span class="line">nvm alias default <span class="number">4.7</span>.<span class="number">3</span></span><br></pre></td></tr></table></figure>

<p>Check that node 4.7.3 is your default node version, with the command <code>nvm ls</code>.</p>
<h4 id="Install-PM2"><a href="#Install-PM2" class="headerlink" title="Install PM2"></a>Install PM2</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm <span class="selector-tag">i</span> -g pm2</span><br></pre></td></tr></table></figure>

<p>Check that your PM2 is working with the following commands:</p>
<ul>
<li><code>pm2 list</code> =&gt; list the process under PM2</li>
<li><code>pm2 -v</code> =&gt; list PM2 version</li>
</ul>
<h4 id="Install-nginx-for-the-management-of-your-host-server"><a href="#Install-nginx-for-the-management-of-your-host-server" class="headerlink" title="Install nginx for the management of your host server"></a>Install nginx for the management of your host server</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="builtin-name">get</span> install nginx</span><br></pre></td></tr></table></figure>

<p>Note: I suggest to use the docker version of nginx</p>
<h3 id="Development-Setup"><a href="#Development-Setup" class="headerlink" title="Development Setup"></a>Development Setup</h3><h4 id="Install-pm2-meteor-on-your-Development-computer"><a href="#Install-pm2-meteor-on-your-Development-computer" class="headerlink" title="Install pm2-meteor on your Development computer"></a>Install pm2-meteor on your Development computer</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="selector-tag">i</span> pm2-meteor -g</span><br></pre></td></tr></table></figure>

<h4 id="Create-a-deployment-folder-with-mkdir-deploy"><a href="#Create-a-deployment-folder-with-mkdir-deploy" class="headerlink" title="Create a deployment folder with mkdir deploy"></a>Create a deployment folder with mkdir deploy</h4><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Cd</span> deploy</span><br></pre></td></tr></table></figure>

<p>Type the following command to init the default deployment file: <code>pm2-meteor init</code>.</p>
<p>pm2-meteor will then create a file <code>pm2-meteor.json</code>.</p>
<p>Edit your <code>pm2-meteor.json</code> with your own parameters.</p>
<p>Below is my pm2-meteor.json given as reference.</p>
<p>You note that I use the <code>nvm</code> command in my <code>pm2-meteor.json</code>, because without using the nvm command, pm2 will use Node version on your server that may be not compatible with the one required by Vulcan GraphQL/Apollo (which is node version 4.7.0 or 4.7.3) and in this case pm2 will generate high use of your CPU around 100% !</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"appName"</span>: <span class="string">"myappname"</span>,</span><br><span class="line">  <span class="attr">"appLocation"</span>: &#123;</span><br><span class="line">    <span class="attr">"local"</span>: <span class="string">"~/myappfolder"</span>,</span><br><span class="line">    <span class="attr">"branch"</span>: <span class="string">"myappbranch"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"meteorSettingsLocation"</span>: <span class="string">"~/myappfolder/mysettings.json"</span>,</span><br><span class="line">  <span class="attr">"meteorSettingsInRepo"</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">"prebuildScript"</span>: <span class="string">"meteor add mycustompackage"</span>,</span><br><span class="line">  <span class="attr">"meteorBuildFlags"</span>: <span class="string">"--architecture os.linux.x86_64"</span>,</span><br><span class="line">  <span class="attr">"env"</span>: &#123;</span><br><span class="line">    <span class="attr">"ROOT_URL"</span>: <span class="string">"https://myurl"</span>,</span><br><span class="line">    <span class="attr">"PORT"</span>: myport,</span><br><span class="line">    <span class="attr">"MONGO_URL"</span>: <span class="string">"mongodb://username:password@ip1:port1,ip2:port2/dbname?authSource=admin&amp;replicaSet=replicasetname"</span>,</span><br><span class="line">    <span class="attr">"MONGO_OPLOG_URL"</span>: <span class="string">"mongodb://user:password@ip1:port1,ip2:port2/local?authSource=admin&amp;replicaSet=replicasetname"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"server"</span>: &#123;</span><br><span class="line">    <span class="attr">"host"</span>: <span class="string">"myserverip"</span>,</span><br><span class="line">    <span class="attr">"username"</span>: <span class="string">"username"</span>,</span><br><span class="line">    <span class="attr">"password"</span>: <span class="string">"mypassword"</span>,</span><br><span class="line">    <span class="attr">"deploymentDir"</span>: <span class="string">"/opt/pm2-meteor"</span>,</span><br><span class="line">    <span class="attr">"loadProfile"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="attr">"nvm"</span>: &#123;</span><br><span class="line">      <span class="attr">"bin"</span>: <span class="string">"~/.nvm/nvm.sh"</span>,</span><br><span class="line">      <span class="attr">"use"</span>: <span class="string">"4.7.2"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"exec_mode"</span>: <span class="string">"cluster_mode"</span>,</span><br><span class="line">    <span class="attr">"instances"</span>: <span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Deploy-your-app-to-the-host-server"><a href="#Deploy-your-app-to-the-host-server" class="headerlink" title="Deploy your app to the host server"></a>Deploy your app to the host server</h4><p>Type the following command</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> <span class="keyword">deploy</span></span><br><span class="line">pm2-meteor <span class="keyword">deploy</span></span><br></pre></td></tr></table></figure>

<h3 id="Useful-Commands"><a href="#Useful-Commands" class="headerlink" title="Useful Commands"></a>Useful Commands</h3><p>Type the following command to check the status of your app on the server<br><code>pm2 list</code></p>
<p>To Stop your App, type<br><code>pm2 stop myappname</code></p>
<p>To restart your App, type<br><code>pm2 restart myappname</code></p>
<p>To delete your App, type<br><code>pm2 delete myappname</code></p>
<h3 id="References"><a href="#References" class="headerlink" title="References"></a>References</h3><ul>
<li><a href="http://pm2-meteor.betawerk.co/" target="_blank" rel="noopener">How to deploy Meteor Apps with pm2-meteor</a></li>
<li><a href="https://libraries.io/npm/pm2" target="_blank" rel="noopener">pm2 2.3.1-next</a></li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-install-node-js-on-ubuntu-16-04" target="_blank" rel="noopener">How To Install Node.js on Ubuntu 16.04</a></li>
<li><a href="https://www.coshx.com/blog/2016/08/19/how-to-deploy-a-meteor-1-4-app-to-heroku/" target="_blank" rel="noopener">Heroku deployment instructions</a></li>
</ul>
<h2 id="Other-Solutions"><a href="#Other-Solutions" class="headerlink" title="Other Solutions"></a>Other Solutions</h2><ul>
<li><a href="http://galaxy.meteor.com" target="_blank" rel="noopener">Galaxy</a></li>
<li><a href="https://scalingo.com/" target="_blank" rel="noopener">Scalingo</a></li>
</ul>

    </div>
  </div>

  <div class="pagination">
    <div class="content-wrapper">
      
      
      
        <a class="link primary next" href="index.html">
          <span class="subtitle-pagination">Next</span>
          Read Me
          <span class="icon-arrow-right-alt"></span>
        </a>
      
    </div>
  </div>

  <div class="github">
    <a class="link tertiary " href="https://github.com/vulcanjs/vulcan-docs/tree/master/source/deployment.md" target="_blank">
      <span class="icon-github"></span>Edit on GitHub</a>
  </div>

  
</div>

    <script src="/script/smooth-scroll.min.js"></script>
    <script src="/script/main.js"></script>
    <script>
      
    </script>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
    <script type="text/javascript"> docsearch({
      apiKey: 'ab091fbd89cda3abd54a35c4441b3e9b',
      indexName: 'vulcanjs',
      inputSelector: '#desktop-search-input',
      debug: true // Set debug to true if you want to inspect the dropdown
    });
    </script>

  </body>
</html>
