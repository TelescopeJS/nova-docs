<!DOCTYPE html>
<html lang="en">
  <head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">

    <!-- Basic -->
    <title>Newsletter | Vulcan Docs</title>
    <meta name="description" content>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="images/favicon.ico" sizes="16x16 32x32 64x64">

    <!-- Social -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://docs.vulcanjs.org">
    <meta property="og:title" content="Newsletter | Vulcan Docs">
    <meta property="og:description" content>
    <meta property="og:image" content>
    <meta name="twitter:card" content="summary_image_large">
    <meta name="twitter:site" content="@vulcanjs">
    <meta name="twitter:title" content="Newsletter | Vulcan Docs">
    <meta name="twitter:description" content>
    <meta name="twitter:image" content>

    <!-- Misc -->
    <meta name="google-site-verification" content>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,200,300italic,400italic" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/style/style.css">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css">


  </head>
  <body class>
    

<div class="nav dark">
  <div class="nav-group">
    <div class="nav-item show-mobile">
      <span class="js-sidebar-toggle ">
        <span class="icon-menu"></span>
      </span>
    </div>
    <div class="nav-item">
      <a class="logo-wrapper" href="https://docs.vulcanjs.org/" title="Vulcan Documentation Vulcan Documentation">
        <img src="/images/vulcan-logo-border-2.svg" alt="Vulcan Documentation" class="logo">
        <span>Vulcan Documentation</span>
      </a>
    </div>
  </div>

  <div class="nav-group right">

    <div class="nav-item wrapper-search">
      <div class="input-symbol small round">
        <input type="text" placeholder="Search Vulcan Docs" id="desktop-search-input">
        <span class="icon-search"></span>
      </div>
      <div class="wrapper-desktop-search-results"></div>
    </div>

    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="https://github.com/vulcanjs/vulcan">
          <span>GitHub</span>
        </a>
      </div>
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="http://slack.vulcanjs.org">
          <span>Slack</span>
        </a>
      </div>
    
  </div>
</div>

<div class="sidebar">
  <div class="panel">
    <div class="panel-item">
      <a class href="https://docs.vulcanjs.org/" title="Vulcan Documentation">
        <span>Vulcan Documentation Vulcan Documentation</span>
      </a>
    </div>
    
      <div class="panel-item " ">
        <a class href="https://github.com/vulcanjs/vulcan">
          <span>GitHub</span>
        </a>
      </div>
    
      <div class="panel-item " ">
        <a class href="http://slack.vulcanjs.org">
          <span>Slack</span>
        </a>
      </div>
    
  </div>

  <div class="sidebar-content">
    <div class="topcap">
      
    </div>

    <ul class="toc">
      
        <li>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="index.html" class="sidebar-link ">
                  <span>Read Me</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="nutshell.html" class="sidebar-link ">
                  <span>Vulcan in a Nutshell</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="toc.html" class="sidebar-link ">
                  <span>Table of Contents</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Schemas</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="schemas.html" class="sidebar-link ">
                  <span>Schemas & Collections</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="schema-properties.html" class="sidebar-link ">
                  <span>Schema Properties</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="field-resolvers.html" class="sidebar-link ">
                  <span>Field Resolvers</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="relations.html" class="sidebar-link ">
                  <span>Relations</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">GraphQL API</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="graphql-schema.html" class="sidebar-link ">
                  <span>GraphQL Schema</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="queries.html" class="sidebar-link ">
                  <span>Queries</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="filtering.html" class="sidebar-link ">
                  <span>Filtering</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="mutations.html" class="sidebar-link ">
                  <span>Mutations</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="fragments.html" class="sidebar-link ">
                  <span>Fragments</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="server-queries.html" class="sidebar-link ">
                  <span>Querying on the Server</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="connecting-remotely.html" class="sidebar-link ">
                  <span>Connecting Remotely</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Features</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="routing.html" class="sidebar-link ">
                  <span>Routing</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="settings.html" class="sidebar-link ">
                  <span>Settings</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="groups-permissions.html" class="sidebar-link ">
                  <span>Groups & Permissions</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="callbacks.html" class="sidebar-link ">
                  <span>Callbacks</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="users.html" class="sidebar-link ">
                  <span>Users</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="internationalization.html" class="sidebar-link ">
                  <span>Internationalization</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="head-tags.html" class="sidebar-link ">
                  <span>Head Tags</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="errors.html" class="sidebar-link ">
                  <span>Errors & Messages</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Components</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="components.html" class="sidebar-link ">
                  <span>Components</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="ui-components.html" class="sidebar-link ">
                  <span>UI Components</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="datatable.html" class="sidebar-link ">
                  <span>Datatable</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="card.html" class="sidebar-link ">
                  <span>Card</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="forms-components.html" class="sidebar-link ">
                  <span>Form Components</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="other-components.html" class="sidebar-link ">
                  <span>Other Components</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Forms</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="forms.html" class="sidebar-link ">
                  <span>Forms</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="decorators.html" class="sidebar-link ">
                  <span>Field Decorators</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="forms-custom.html" class="sidebar-link ">
                  <span>Custom Form Components</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Server</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="performance.html" class="sidebar-link ">
                  <span>Performance</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="database.html" class="sidebar-link ">
                  <span>Database Layer</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Other Packages</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="packages.html" class="sidebar-link ">
                  <span>Packages Types</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="email.html" class="sidebar-link ">
                  <span>Email</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="events.html" class="sidebar-link ">
                  <span>Analytics & Event Tracking</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="error-tracking.html" class="sidebar-link ">
                  <span>Error Tracking</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="debug.html" class="sidebar-link ">
                  <span>Debugging</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Testing</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="unit-testing.html" class="sidebar-link ">
                  <span>Unit Testing</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="storybook.html" class="sidebar-link ">
                  <span>Storybook</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Resources</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="learn.html" class="sidebar-link ">
                  <span>Learn More</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="examples.html" class="sidebar-link ">
                  <span>Examples</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="common-problems.html" class="sidebar-link ">
                  <span>Common Problems</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="plugins.html" class="sidebar-link ">
                  <span>Plugins</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="themes.html" class="sidebar-link ">
                  <span>Themes</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="tutorials.html" class="sidebar-link ">
                  <span>Tutorials</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="videos.html" class="sidebar-link ">
                  <span>Videos</span>
                </a>
              </li>
            
          </ul>
        </li>
      
    </ul>
  </div>
</div>

<div class="content">
  <div class="content-wrapper">
    <div class="header-content">
      <h1 class="title-page">Newsletter</h1>
      

      <div class="page-actions">
        <div class="actions-group">
          <a class="btn tertiary small round lowercase" href="https://github.com/vulcanjs/vulcan-docs/tree/master/source/newsletter.md" target="_blank"><span class="icon-github"></span> <span>Edit on GitHub</span></a>
          
        </div>
      </div>
    </div>

    <div class="document-formatting">
      <p>This package automatically generates and sends a newsletter for posts and comments on a predefined schedule. </p>
<p><img src="http://f.cl.ly/items/0V0F351k1R1i3L1k1D0J/telescope-newsletter.png" alt="Newsletter"></p>
<p>Every <code>x</code> days, it builds a digest consisting of the top <code>y</code> items posted in the past <code>x</code> days that haven’t yet been sent out in a newsletter. It then sends the campaign, and sends you a confirmation email.</p>
<p>Note: this package requires using a third-party email provider (<a href="http://mailchimp.com" target="_blank" rel="noopener">MailChimp</a> and <a href="http://sendy.co" target="_blank" rel="noopener">Sendy</a> are currently supported). </p>
<h2 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h2><p><code>meteor add vulcan:newsletter</code></p>
<h2 id="Dependencies"><a href="#Dependencies" class="headerlink" title="Dependencies"></a>Dependencies</h2><h4 id="Vulcan-Dependencies"><a href="#Vulcan-Dependencies" class="headerlink" title="Vulcan Dependencies"></a>Vulcan Dependencies</h4><ul>
<li>vulcan:core</li>
<li>vulcan:posts</li>
<li>vulcan:comments</li>
<li>vulcan:categories</li>
<li>vulcan:email</li>
</ul>
<h4 id="NPM-Dependencies"><a href="#NPM-Dependencies" class="headerlink" title="NPM Dependencies"></a>NPM Dependencies</h4><ul>
<li><a href="https://github.com/gomfunkel/node-mailchimp" target="_blank" rel="noopener">mailchimp</a></li>
<li><a href="https://github.com/igord/sendy-api" target="_blank" rel="noopener">sendy-api</a></li>
</ul>
<h2 id="Settings"><a href="#Settings" class="headerlink" title="Settings"></a>Settings</h2><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"newsletter"</span>: &#123;</span><br><span class="line">  <span class="string">"enabled"</span>:true,</span><br><span class="line">  <span class="string">"enabledInDev"</span>:false,</span><br><span class="line">  <span class="string">"autoSubscribe"</span>:false,</span><br><span class="line">  <span class="string">"frequency"</span>: [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>],</span><br><span class="line">  <span class="string">"time"</span>: <span class="string">"00:00"</span>,</span><br><span class="line">  <span class="string">"provider"</span>: <span class="string">"mailchimp"</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">"sendy"</span>: &#123;</span><br><span class="line">  <span class="string">"server"</span>: <span class="string">"http://sendy.myapp.com/"</span>,</span><br><span class="line">  <span class="string">"apiKey"</span>: <span class="string">"123foo"</span>,</span><br><span class="line">  <span class="string">"listId"</span>: <span class="string">"456bar"</span>,</span><br><span class="line">  <span class="string">"fromName"</span>: <span class="string">"Bruce Willis"</span>,</span><br><span class="line">  <span class="string">"fromEmail"</span>: <span class="string">"hello@myapp.com"</span>,</span><br><span class="line">  <span class="string">"replyTo"</span>: <span class="string">"hello@myapp.com"</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">"mailchimp"</span>: &#123;</span><br><span class="line">  <span class="string">"apiKey"</span>: <span class="string">"123foo"</span>,</span><br><span class="line">  <span class="string">"listId"</span>: <span class="string">"456bar"</span>,</span><br><span class="line">  <span class="string">"fromName"</span>: <span class="string">"hello@myapp.com"</span>,</span><br><span class="line">  <span class="string">"fromEmail"</span>: <span class="string">"hello@myapp.com"</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<ul>
<li><code>enabled</code>: enable/disable automated newsletter sending.</li>
<li><code>enabledInDev</code>: enable/disable newsletter while in development mode. </li>
<li><code>autoSubscribe</code>: automatically subscribe every new user to your newsletter.</li>
<li><code>frequency</code>: which days the newsletter should go out. <code>1</code> is Monday, <code>2</code> is Tuesday, etc.</li>
<li><code>time</code>: what time the newsletter should go out.</li>
<li><code>provider</code>: the name of your newsletter provider.</li>
</ul>
<h4 id="Sendy-Settings"><a href="#Sendy-Settings" class="headerlink" title="Sendy Settings"></a>Sendy Settings</h4><ul>
<li><code>server</code>: The URL to your self-hosted Sendy server (including trailing <code>/</code>).</li>
<li><code>apiKey</code>: Your API key.</li>
<li><code>listId</code>: List ID.</li>
<li><code>fromName</code>: “From” name.</li>
<li><code>fromEmail</code>: “From” email.</li>
<li><code>replyTo</code>: “Reply to” email.</li>
</ul>
<h4 id="MailChimp-Settings"><a href="#MailChimp-Settings" class="headerlink" title="MailChimp Settings"></a>MailChimp Settings</h4><ul>
<li><code>apiKey</code>: Your API key.</li>
<li><code>listId</code>: List ID.</li>
</ul>
<h2 id="Test-Routes"><a href="#Test-Routes" class="headerlink" title="Test Routes"></a>Test Routes</h2><p>If you want to preview your email templates, you can do so at the following routes: </p>
<ul>
<li><strong>Campaign</strong>: <a href="http://localhost:3000/email/newsletter" target="_blank" rel="noopener">http://localhost:3000/email/newsletter</a></li>
<li><strong>Confirmation</strong>: <a href="http://localhost:3000/email/newsletter-confirmation" target="_blank" rel="noopener">http://localhost:3000/email/newsletter-confirmation</a></li>
</ul>
<p>(Replace <code>http://localhost:3000</code> with your app’s URL)</p>
<h2 id="Mutations"><a href="#Mutations" class="headerlink" title="Mutations"></a>Mutations</h2><p>The package exposes the following GraphQL mutations:</p>
<ul>
<li><code>sendNewsletter</code>: generate and send the next newsletter.</li>
<li><code>testNewsletter</code>: same as <code>sendNewsletter</code>, but without marking posts as sent. </li>
<li><code>addUserNewsletter(userId: String)</code>: add a user to your subscriber list.</li>
<li><code>addEmailNewsletter(email: String)</code>: add an email to your subscriber list.</li>
<li><code>removeUserNewsletter(userId: String)</code>: remove a user from your subscriber list. </li>
</ul>
<p>You can call these mutations from any React component using the <a href="mutations.html#Higher-Order-Components"><code>withMutation</code> HoC</a>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; PropTypes, Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; withMutation &#125; <span class="keyword">from</span> <span class="string">'meteor/vulcan:core'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> SendButton = <span class="function">(<span class="params">&#123; sendNewsletter &#125;</span>) =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;sendNewsletter&#125;</span>&gt;</span>Send Newsletter<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> withMutation(&#123;<span class="attr">name</span>: <span class="string">'sendNewsletter'</span>&#125;)(SendButton);</span><br></pre></td></tr></table></figure>

<h2 id="Providers"><a href="#Providers" class="headerlink" title="Providers"></a>Providers</h2><p>To add a provider, you can start from the <code>sample.js</code> template included in the package. </p>
<p>Any new provider must implement the following methods: </p>
<ul>
<li><code>Newsletters.providerName.subscribe(email)</code>: subscribe an email to your list.</li>
<li><code>Newsletters.providerName.unsubscribe(email)</code>: unsubscribe an email from your list.</li>
<li><code>Newsletters.providerName.send({ title, subject, text, html, isTest})</code>: send a newsletter. </li>
</ul>
<h2 id="NewsletterSubscribe-Component"><a href="#NewsletterSubscribe-Component" class="headerlink" title="NewsletterSubscribe Component"></a>NewsletterSubscribe Component</h2><p>This package also exports a <code>NewsletterSubscribe</code> custom form field component used to add a subscribe/unsubscribe button to the user account page. </p>
<h2 id="Settings-1"><a href="#Settings-1" class="headerlink" title="Settings"></a>Settings</h2><table>
<thead>
<tr>
<th>Setting</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>enabled</td>
<td>false</td>
<td>Enable the automated newsletter</td>
</tr>
<tr>
<td>enabledInDev</td>
<td>false</td>
<td>Enable the automated newsletter while in development mode</td>
</tr>
<tr>
<td>frequency</td>
<td>[1,2,3,4,5,6,7]</td>
<td>The days on which to send the newsletter (1 = Monday, 2 = Tuesday, etc.)</td>
</tr>
<tr>
<td>time</td>
<td>“07:55”</td>
<td>When to send out the newsletter</td>
</tr>
<tr>
<td>autoSubscribe</td>
<td>false</td>
<td>Whether new users should be automatically subscribed to the newsletter</td>
</tr>
</tbody></table>

    </div>
  </div>

  <div class="pagination">
    <div class="content-wrapper">
      
      
      
        <a class="link primary next" href="index.html">
          <span class="subtitle-pagination">Next</span>
          Read Me
          <span class="icon-arrow-right-alt"></span>
        </a>
      
    </div>
  </div>

  <div class="github">
    <a class="link tertiary " href="https://github.com/vulcanjs/vulcan-docs/tree/master/source/newsletter.md" target="_blank">
      <span class="icon-github"></span>Edit on GitHub</a>
  </div>

  
</div>

    <script src="/script/smooth-scroll.min.js"></script>
    <script src="/script/main.js"></script>
    <script>
      
    </script>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
    <script type="text/javascript"> docsearch({
      apiKey: 'ab091fbd89cda3abd54a35c4441b3e9b',
      indexName: 'vulcanjs',
      inputSelector: '#desktop-search-input',
      debug: true // Set debug to true if you want to inspect the dropdown
    });
    </script>

  </body>
</html>
