<!DOCTYPE html>
<html lang="en">
  <head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">

    <!-- Basic -->
    <title>Internationalization | Vulcan Docs</title>
    <meta name="description" content>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="images/favicon.ico" sizes="16x16 32x32 64x64">

    <!-- Social -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://docs.vulcanjs.org">
    <meta property="og:title" content="Internationalization | Vulcan Docs">
    <meta property="og:description" content>
    <meta property="og:image" content>
    <meta name="twitter:card" content="summary_image_large">
    <meta name="twitter:site" content="@vulcanjs">
    <meta name="twitter:title" content="Internationalization | Vulcan Docs">
    <meta name="twitter:description" content>
    <meta name="twitter:image" content>

    <!-- Misc -->
    <meta name="google-site-verification" content>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,200,300italic,400italic" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/style/style.css">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css">


  </head>
  <body class>
    

<div class="nav dark">
  <div class="nav-group">
    <div class="nav-item show-mobile">
      <span class="js-sidebar-toggle ">
        <span class="icon-menu"></span>
      </span>
    </div>
    <div class="nav-item">
      <a class="logo-wrapper" href="https://docs.vulcanjs.org/" title="Vulcan Documentation Vulcan Documentation">
        <img src="/images/vulcan-logo-border-2.svg" alt="Vulcan Documentation" class="logo">
        <span>Vulcan Documentation</span>
      </a>
    </div>
  </div>

  <div class="nav-group right">

    <div class="nav-item wrapper-search">
      <div class="input-symbol small round">
        <input type="text" placeholder="Search Vulcan Docs" id="desktop-search-input">
        <span class="icon-search"></span>
      </div>
      <div class="wrapper-desktop-search-results"></div>
    </div>

    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="https://github.com/vulcanjs/vulcan">
          <span>GitHub</span>
        </a>
      </div>
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="http://slack.vulcanjs.org">
          <span>Slack</span>
        </a>
      </div>
    
  </div>
</div>

<div class="sidebar">
  <div class="panel">
    <div class="panel-item">
      <a class href="https://docs.vulcanjs.org/" title="Vulcan Documentation">
        <span>Vulcan Documentation Vulcan Documentation</span>
      </a>
    </div>
    
      <div class="panel-item " ">
        <a class href="https://github.com/vulcanjs/vulcan">
          <span>GitHub</span>
        </a>
      </div>
    
      <div class="panel-item " ">
        <a class href="http://slack.vulcanjs.org">
          <span>Slack</span>
        </a>
      </div>
    
  </div>

  <div class="sidebar-content">
    <div class="topcap">
      
    </div>

    <ul class="toc">
      
        <li>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="index.html" class="sidebar-link ">
                  <span>Read Me</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="nutshell.html" class="sidebar-link ">
                  <span>Vulcan in a Nutshell</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="toc.html" class="sidebar-link ">
                  <span>Table of Contents</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Schemas</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="schemas.html" class="sidebar-link ">
                  <span>Schemas & Collections</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="schema-properties.html" class="sidebar-link ">
                  <span>Schema Properties</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="field-resolvers.html" class="sidebar-link ">
                  <span>Field Resolvers</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="relations.html" class="sidebar-link ">
                  <span>Relations</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">GraphQL API</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="graphql-schema.html" class="sidebar-link ">
                  <span>GraphQL Schema</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="queries.html" class="sidebar-link ">
                  <span>Queries</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="filtering.html" class="sidebar-link ">
                  <span>Filtering</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="mutations.html" class="sidebar-link ">
                  <span>Mutations</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="fragments.html" class="sidebar-link ">
                  <span>Fragments</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="server-queries.html" class="sidebar-link ">
                  <span>Querying on the Server</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="connecting-remotely.html" class="sidebar-link ">
                  <span>Connecting Remotely</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Features</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="routing.html" class="sidebar-link ">
                  <span>Routing</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="settings.html" class="sidebar-link ">
                  <span>Settings</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="groups-permissions.html" class="sidebar-link ">
                  <span>Groups & Permissions</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="callbacks.html" class="sidebar-link ">
                  <span>Callbacks</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="users.html" class="sidebar-link ">
                  <span>Users</span>
                </a>
              </li>
            
              
              <li class="item-toc  current">
                <a href class="sidebar-link  current">
                  <span>Internationalization</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="head-tags.html" class="sidebar-link ">
                  <span>Head Tags</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="errors.html" class="sidebar-link ">
                  <span>Errors & Messages</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Components</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="components.html" class="sidebar-link ">
                  <span>Components</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="ui-components.html" class="sidebar-link ">
                  <span>UI Components</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="datatable.html" class="sidebar-link ">
                  <span>Datatable</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="card.html" class="sidebar-link ">
                  <span>Card</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="forms-components.html" class="sidebar-link ">
                  <span>Form Components</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="other-components.html" class="sidebar-link ">
                  <span>Other Components</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Forms</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="forms.html" class="sidebar-link ">
                  <span>Forms</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="decorators.html" class="sidebar-link ">
                  <span>Field Decorators</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="forms-custom.html" class="sidebar-link ">
                  <span>Custom Form Components</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Server</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="performance.html" class="sidebar-link ">
                  <span>Performance</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="database.html" class="sidebar-link ">
                  <span>Database Layer</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Other Packages</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="packages.html" class="sidebar-link ">
                  <span>Packages Types</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="email.html" class="sidebar-link ">
                  <span>Email</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="events.html" class="sidebar-link ">
                  <span>Analytics & Event Tracking</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="error-tracking.html" class="sidebar-link ">
                  <span>Error Tracking</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="debug.html" class="sidebar-link ">
                  <span>Debugging</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Testing</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="unit-testing.html" class="sidebar-link ">
                  <span>Unit Testing</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="storybook.html" class="sidebar-link ">
                  <span>Storybook</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Resources</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="learn.html" class="sidebar-link ">
                  <span>Learn More</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="examples.html" class="sidebar-link ">
                  <span>Examples</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="common-problems.html" class="sidebar-link ">
                  <span>Common Problems</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="plugins.html" class="sidebar-link ">
                  <span>Plugins</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="themes.html" class="sidebar-link ">
                  <span>Themes</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="tutorials.html" class="sidebar-link ">
                  <span>Tutorials</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="videos.html" class="sidebar-link ">
                  <span>Videos</span>
                </a>
              </li>
            
          </ul>
        </li>
      
    </ul>
  </div>
</div>

<div class="content">
  <div class="content-wrapper">
    <div class="header-content">
      <h1 class="title-page">Internationalization</h1>
      

      <div class="page-actions">
        <div class="actions-group">
          <a class="btn tertiary small round lowercase" href="https://github.com/vulcanjs/vulcan-docs/tree/master/source/internationalization.md" target="_blank"><span class="icon-github"></span> <span>Edit on GitHub</span></a>
          
        </div>
      </div>
    </div>

    <div class="document-formatting">
      <p>There are two different yet related aspects to internationalization: making an app or package available for translation so that it can be used in any language, and actually building multi-language sites. </p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/yO4MAdmiiCc?rel=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>

<h2 id="Debugging"><a href="#Debugging" class="headerlink" title="Debugging"></a>Debugging</h2><p><strong>If you’ve got the <a href="/debug.html">debug package</a> enabled, an Internationalization debugging UI is available at <a href="http://0.0.0.0:3000/debug/i18n" target="_blank" rel="noopener">http://0.0.0.0:3000/debug/i18n</a>.</strong></p>
<h2 id="Locales"><a href="#Locales" class="headerlink" title="Locales"></a>Locales</h2><p>A locale is a language variant, such as UK English, American English, Canadian French, France French, and so on. </p>
<h3 id="Setting-a-Default-Locale"><a href="#Setting-a-Default-Locale" class="headerlink" title="Setting a Default Locale"></a>Setting a Default Locale</h3><p>The easiest way to tell Vulcan which language to use is to set the <code>locale</code> field in your <code>settings.json</code> file:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"public"</span>: &#123;</span><br><span class="line">    <span class="string">"locale"</span>: <span class="string">"en"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>This will act as the default locale and be applied unless a specific locale has been selected by the server (based on the URL, user cookie, or user data). </p>
<p>[TODO] You can also specify your locale as an array in order to enable fallback locales. For example, here’s how you can tell Vulcan to use the <code>fr_CA</code> locale whenever possible, but to fallback to <code>fr_FR</code> if it’s not available:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"public"</span>: &#123;</span><br><span class="line">    <span class="string">"locale"</span>: [ <span class="string">"fr_CA"</span>, <span class="string">"fr_FR"</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Registering-Locales"><a href="#Registering-Locales" class="headerlink" title="Registering Locales"></a>Registering Locales</h3><p>For multi-language apps, you can also register one or more locales:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; registerLocale &#125; <span class="keyword">from</span> <span class="string">'meteor/vulcan:core'</span>;</span><br><span class="line"></span><br><span class="line">registerLocale(&#123;</span><br><span class="line">  id: <span class="string">'en'</span>, <span class="comment">// will be used as a general identifier and URL slug</span></span><br><span class="line">  aliases: [<span class="string">'en_US'</span>, <span class="string">'en_UK'</span>], <span class="comment">// other strings that should be matched [TODO]</span></span><br><span class="line">  label: <span class="string">'English'</span>, <span class="comment">// an optional label used in forms, etc.</span></span><br><span class="line">  domains: [<span class="string">'http://localhost:3000'</span>, <span class="string">'http://en.zenshome.jp'</span>], <span class="comment">// domain aliases that should use the locale [TODO]</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="Picking-a-Locale"><a href="#Picking-a-Locale" class="headerlink" title="Picking a Locale"></a>Picking a Locale</h3><p>Vulcan can pick a locale to show users based on a number of factors. By order of priority (higher priority first): </p>
<ul>
<li>If the user is logged in, the <code>locale</code> property on their profile object. </li>
<li>A <code>locale</code> cookie. [TODO]</li>
<li>The current domain (<code>mysite.com</code>, <code>mysite.fr</code>, <code>mysite.jp</code>, etc.). [TODO]</li>
<li>The current locale URL segment (<code>mysite.com/en/foo</code>, <code>mysite.com/fr/foo</code>, etc.). [TODO]</li>
<li>Browser settings. [TODO]</li>
</ul>
<p>Ideally, all factors should resolve similarly both on the client, and on the server during the SSR process.</p>
<p>A big difference between these techniques is whether you’re actually using different URLs for different locales or not. Putting everything on the same domain with a simple toggle is easy to set up and easy to navigate for users (provided your locale controls are easily accessible), but you won’t reap any SEO benefits from supporting multiple languages. On the other hand, having different domains can be good for SEO, but might require users to log in again if they switch locales. For those reasons, using different paths on the <em>same</em> domain can be a good middle ground. </p>
<h3 id="Switching-Locales"><a href="#Switching-Locales" class="headerlink" title="Switching Locales"></a>Switching Locales</h3><p>You can switch locales by calling <code>setLocale</code> and <code>getLocale</code> (available on the React context) from within your components: </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> LanguageSwitcher = <span class="function">(<span class="params">&#123;&#125;, &#123; setLocale, getLocale &#125;</span>) =&gt;</span> (</span><br><span class="line">  &lt;div className=<span class="string">"language-switcher"</span>&gt;</span><br><span class="line">    &lt;a className=&#123;<span class="string">`<span class="subst">$&#123;getLocale() === <span class="string">'en'</span> ? <span class="string">'active'</span> : <span class="string">''</span>&#125;</span>`</span>&#125; href=<span class="string">"javascript:void(0)"</span> onClick=&#123;()=&gt;setLocale(<span class="string">'en'</span>)&#125;&gt;EN&lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">    &lt;a className=&#123;`$&#123;getLocale() === 'ja' ? 'active' : ''&#125;`&#125; href="javascript:void(0)" onClick=&#123;()=&gt;setLocale('ja')&#125;&gt;日本語&lt;/</span>a&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">LanguageSwitcher.contextTypes = &#123;</span></span><br><span class="line"><span class="regexp">  getLocale: PropTypes.func,</span></span><br><span class="line"><span class="regexp">  setLocale: PropTypes.func,</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">registerComponent('LanguageSwitcher', LanguageSwitcher);</span></span><br></pre></td></tr></table></figure>

<p>Note that calling <code>setLocale</code> will automatically set the <code>locale</code> cookie, as well as the <code>user.locale</code> property on the user profie object if the user is logged in. It will also reset the Apollo store in order to reload a fresh set of data from the server. </p>
<p>Alternatively, if you’re setting the locale based on the current domain, you can also dispense with <code>setLocale()</code> altogether and simply redirect users to the correct domain or URL. </p>
<h2 id="Strings"><a href="#Strings" class="headerlink" title="Strings"></a>Strings</h2><p>All packages included in the main Vulcan repo are ready for internationalization and come with English strings. </p>
<h3 id="Adding-amp-Replacing-Strings"><a href="#Adding-amp-Replacing-Strings" class="headerlink" title="Adding &amp; Replacing Strings"></a>Adding &amp; Replacing Strings</h3><p>You can add strings using the <code>addStrings</code> function:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; addStrings &#125; <span class="keyword">from</span> <span class="string">'meteor/vulcan:core'</span>;</span><br><span class="line"></span><br><span class="line">addStrings(<span class="string">'en'</span>, &#123;</span><br><span class="line">  <span class="string">'hello_world'</span>: <span class="string">'Hello world!'</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">addStrings(<span class="string">'fr'</span>, &#123;</span><br><span class="line">  <span class="string">'hello_world'</span>: <span class="string">'Bonjour le monde!'</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>Note that this can be used not only for adding new languages, but also to replace strings in the current language anywhere in your app: </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; addStrings &#125; <span class="keyword">from</span> <span class="string">'meteor/vulcan:core'</span>;</span><br><span class="line"></span><br><span class="line">addStrings(<span class="string">'en'</span>, &#123;</span><br><span class="line">  <span class="string">'hello_world'</span>: <span class="string">'Greetings planet!'</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="Internationalizing-Components"><a href="#Internationalizing-Components" class="headerlink" title="Internationalizing Components"></a>Internationalizing Components</h3><p>There are two ways to use internationalized strings inside your components, <code>&lt;FormattedMessage/&gt;</code> and <code>intl()</code>. </p>
<h4 id="FormattedMessage"><a href="#FormattedMessage" class="headerlink" title="FormattedMessage"></a>FormattedMessage</h4><p><code>&lt;FormattedMessage/&gt;</code> is a React component that will generated a <code>&lt;span&gt;</code> tag for your internationalized strings:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; FormattedMessage &#125; <span class="keyword">from</span> <span class="string">'meteor/vulcan:i18n'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> MyComponent = <span class="function"><span class="params">()</span> =&gt;</span> </span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;FormattedMessage id=<span class="string">"hello_world"</span> /&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>

<p>It also takes variables as the <code>values</code> prop:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; addStrings &#125; <span class="keyword">from</span> <span class="string">'meteor/vulcan:core'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; FormattedMessage &#125; <span class="keyword">from</span> <span class="string">'meteor/vulcan:i18n'</span>;</span><br><span class="line"></span><br><span class="line">addStrings(<span class="string">'en'</span>, &#123;</span><br><span class="line">  <span class="string">'hello_last_name_first_name'</span>: <span class="string">'Hello, &#123;firstName&#125; &#123;lastName&#125;'</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> MyComponent = <span class="function">(<span class="params">&#123; user &#125;</span>) =&gt;</span> </span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;FormattedMessage id=<span class="string">"hello_last_name_first_name"</span> values=&#123;&#123; <span class="attr">firstName</span>: user.firstName, <span class="attr">lastName</span>: user.lastName &#125;&#125;/&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>

<p>And a <code>defaultMessage</code> prop as a fallback:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; addStrings &#125; <span class="keyword">from</span> <span class="string">'meteor/vulcan:core'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; FormattedMessage &#125; <span class="keyword">from</span> <span class="string">'meteor/vulcan:i18n'</span>;</span><br><span class="line"></span><br><span class="line">addStrings(<span class="string">'en'</span>, &#123;</span><br><span class="line">  <span class="string">'hello_world'</span>: <span class="string">'Greetings planet!'</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> MyComponent = <span class="function">(<span class="params">&#123; user &#125;</span>) =&gt;</span> </span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;FormattedMessage id=<span class="string">"hello_world"</span> defaultMessage=<span class="string">"Hello world!"</span> /&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>

<p>Finally, you can also pass <code>html={true}</code> to evaluate the entire string as HTML:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; addStrings &#125; <span class="keyword">from</span> <span class="string">'meteor/vulcan:core'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; FormattedMessage &#125; <span class="keyword">from</span> <span class="string">'meteor/vulcan:i18n'</span>;</span><br><span class="line"></span><br><span class="line">addStrings(<span class="string">'en'</span>, &#123;</span><br><span class="line">  <span class="string">'email_me_at'</span>: <span class="string">`Email me at &lt;a href="mailto:&#123;email&#125;"&gt;&#123;email&#125;&lt;/a&gt;`</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> MyComponent = <span class="function">(<span class="params">&#123; user &#125;</span>) =&gt;</span> </span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;FormattedMessage id=<span class="string">"email_me_at"</span> values=&#123;&#123; <span class="attr">email</span>: user.email &#125;&#125; html=&#123;<span class="literal">true</span>&#125;/&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="formatMessage"><a href="#formatMessage" class="headerlink" title="formatMessage()"></a>formatMessage()</h4><p>In some cases, you don’t want to render out your string as a <code>&lt;span&gt;</code>. For example, you might want to use it inside an error message. You can do so using the <code>formatMessage</code> function, which requires adding the <code>intl</code> object to you component’s context types</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; intlShape &#125; <span class="keyword">from</span> <span class="string">'meteor/vulcan:i18n'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyComponent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  showAlert() &#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.context.intl.formatMessage(&#123; <span class="attr">id</span>: <span class="string">'hello_world'</span> &#125;));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.showAlert&#125;</span>&gt;</span>Click me!<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">MyComponent.contextTypes = &#123;</span><br><span class="line">  intl: intlShape</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><code>formatMessages</code>‘ first argument is an object containing <code>id</code> and <code>defaultValue</code> properties, while its second argument is a <code>values</code> object (see previous section).</p>
<h3 id="Using-react-intl"><a href="#Using-react-intl" class="headerlink" title="Using react:intl"></a>Using react:intl</h3><p>By default, Vulcan uses the <code>vulcan:i18n</code> package for internationalization. It supports an extremely limited set of i18n features by design in order to keep the Vulcan bundle size low, but all <code>vulcan:i18n</code> APIs (except for <code>html={true}</code>) are 100% compatible with the <a href="https://github.com/yahoo/react-intl" target="_blank" rel="noopener">react-intl</a> package. </p>
<p>If you do need all of react-intl’s features, here’s how to enable them:</p>
<ol>
<li><p>Create a new <code>_vulcan-i18n</code> package directory</p>
</li>
<li><p>Inside, create the following <code>package.js</code> file:</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Package.describe(&#123;</span><br><span class="line">  name: <span class="string">'vulcan:i18n'</span>,</span><br><span class="line">  summary: <span class="string">"Use react-intl instead of vulcan:i18n"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Package.onUse(<span class="function"><span class="keyword">function</span> (<span class="params">api</span>) </span>&#123;</span><br><span class="line">  api.use([<span class="string">'vulcan:lib'</span>]);</span><br><span class="line">  api.mainModule(<span class="string">'i18n.js'</span>, <span class="string">'server'</span>);</span><br><span class="line">  api.mainModule(<span class="string">'i18n.js'</span>, <span class="string">'client'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>And the following <code>i18n.js</code> file:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> * <span class="keyword">from</span> <span class="string">'react-intl'</span>;</span><br></pre></td></tr></table></figure>

<p>You’ll now have two packages named <code>vulcan:i18n</code>, but because your newly created <code>_vulcan-i18n</code> directory starts with <code>_</code>, it will take alphabetical precedence over the default <code>vulcan-i18n</code> and be used by your app instead. </p>
<p>You can keep importing from <code>vulcan:i18n</code> as usual, except <code>vulcan:i18n</code> will now simply be a clone of <code>react-intl</code>. </p>
<h3 id="getLocale"><a href="#getLocale" class="headerlink" title="getLocale()"></a>getLocale()</h3><p>For content that is <em>not</em> stored as an internationalized string, you can always just use <code>getLocale()</code> to pick the correct string or component:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Intro = <span class="function">(<span class="params">&#123;&#125;, &#123; setLocale, getLocale &#125;</span>) =&gt;</span> (</span><br><span class="line">  &lt;div className=<span class="string">"intro"</span>&gt;</span><br><span class="line">    &#123;getLocale() === <span class="string">'en'</span> &amp;&amp; <span class="xml"><span class="tag">&lt;<span class="name">Components.IntroEn</span>/&gt;</span></span>&#125;</span><br><span class="line">    &#123;getLocale() === <span class="string">'fr'</span> &amp;&amp; <span class="xml"><span class="tag">&lt;<span class="name">Components.IntroFr</span>/&gt;</span></span>&#125;</span><br><span class="line">    &#123;getLocale() === <span class="string">'jafr'</span> &amp;&amp; <span class="xml"><span class="tag">&lt;<span class="name">Components.IntroJa</span>/&gt;</span></span>&#125;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">Intro.contextTypes = &#123;</span></span><br><span class="line"><span class="regexp">  getLocale: PropTypes.func,</span></span><br><span class="line"><span class="regexp">  setLocale: PropTypes.func,</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">registerComponent('Intro', Intro);</span></span><br></pre></td></tr></table></figure>

<h2 id="Internationalizing-Content"><a href="#Internationalizing-Content" class="headerlink" title="Internationalizing Content"></a>Internationalizing Content</h2><p>In addition to translating your app’s UI, you’ll sometimes want to translate your site’s actual content. For example, you might be building an online store where product names need to be translated. </p>
<h3 id="Storing-Translations"><a href="#Storing-Translations" class="headerlink" title="Storing Translations"></a>Storing Translations</h3><p>When migrating from a single-language app, you’ll need to change how data is stored in your database by adding a <code>foo_intl</code> field (for example <code>title_intl</code>) in accordance with Mongo’s <a href="https://docs.mongodb.com/manual/tutorial/specify-language-for-text-index/" target="_blank" rel="noopener">text search</a> guidelines. So you’ll go from:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123; </span><br><span class="line">  <span class="attribute">title</span>: <span class="string">'My Awesome Product'</span>, // internationalized field</span><br><span class="line">  createdAt: <span class="built_in">ISODate</span>(<span class="string">"2018-05-17T00:41:40.247Z"</span>) // non-internationalized field</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>To: </p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123; </span><br><span class="line">  <span class="attribute">title</span>: <span class="string">'My Awesome Product'</span> </span><br><span class="line">  title_intl: [</span><br><span class="line">    &#123;</span><br><span class="line">      locale: <span class="string">'en'</span>,</span><br><span class="line">      value: <span class="string">'My Awesome Product'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attribute">locale</span>: <span class="string">'fr'</span>,</span><br><span class="line">      value: <span class="string">'Mon Super Produit'</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="selector-tag">createdAt</span>: <span class="selector-tag">ISODate</span>("2018<span class="selector-tag">-05-17T00</span><span class="selector-pseudo">:41</span><span class="selector-pseudo">:40.247Z")</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Note that the original <code>title</code> field then becomes optional, and is kept mainly for backwards compatibility when internationalizing existing apps, or as a fallback when no translations exist. The following is also valid if you’d rather not duplicate content:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123; </span><br><span class="line">  <span class="attribute">title_intl</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      locale: <span class="string">'en'</span>,</span><br><span class="line">      value: <span class="string">'My Awesome Product'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attribute">locale</span>: <span class="string">'fr'</span>,</span><br><span class="line">      value: <span class="string">'Mon Super Produit'</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="selector-tag">createdAt</span>: <span class="selector-tag">ISODate</span>("2018<span class="selector-tag">-05-17T00</span><span class="selector-pseudo">:41</span><span class="selector-pseudo">:40.247Z")</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Translation-Order"><a href="#Translation-Order" class="headerlink" title="Translation Order"></a>Translation Order</h4><p>Note that it’s very important that locales are stored in the same order in your database as they are declared using <code>registerLocale</code>. </p>
<p>In other words, for the above examples you need to make sure you register the <code>en</code> locale before the <code>fr</code> locale, otherwise the generated form fields might not match up with your translation strings. </p>
<h4 id="Migration-Script"><a href="#Migration-Script" class="headerlink" title="Migration Script"></a>Migration Script</h4><p>Vulcan includes a migration script that will take all internationalized schema fields (i.e. those with <code>intl: true</code>) and convert their data format. </p>
<p>Just call <code>Vulcan.migrateIntlFields(locale)</code> from your <code>meteor shell</code> (where <code>locale</code> is the locale of the fields’ current content) or from inside a <code>meteor.startup()</code> block (note that <code>Vulcan</code> is a global, meaning it doesn’t need to be imported).</p>
<h3 id="Field-Schema"><a href="#Field-Schema" class="headerlink" title="Field Schema"></a>Field Schema</h3><p>In order to make a field support multiple languages, all you need to do is set <code>intl</code> to <code>true</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">title: &#123;</span><br><span class="line">  intl: <span class="literal">true</span>,</span><br><span class="line">  optional: <span class="literal">false</span>,</span><br><span class="line">  canRead: [<span class="string">'guests'</span>],</span><br><span class="line">  canCreate: [<span class="string">'admins'</span>],</span><br><span class="line">  canUpdate: [<span class="string">'admins'</span>],</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>Behind the scenes, Vulcan will then create a new <code>title_intl</code> schema field, which will be an Array of JSON objects. </p>
<p>This generated field will also be available through your GraphQL API if you need to fetch all translations.</p>
<h3 id="GraphQL-API"><a href="#GraphQL-API" class="headerlink" title="GraphQL API"></a>GraphQL API</h3><p>Thanks to the power of GraphQL, your API will not change when internationalizing a field. In other words, <code>title</code> will remain a <code>String</code> when fetched through the GraphQL API (thanks to the <code>@intl</code> custom directive applied automatically to all internationalized fields). </p>
<p>There are two ways to determine that string’s language: </p>
<ul>
<li>Set the <code>locale</code> GraphQL header.</li>
<li>Pass the locale field argument (<code>title(locale: &quot;en&quot;)</code>).</li>
</ul>
<p>Additionally, a special <code>*field*_intl</code> (e.g. <code>title_intl</code>) field that returns all available translations will also be available.</p>
<p>Note that when querying your endpoint through your Vulcan front-end, the <code>locale</code> header should usually be set automatically for you. Also, you can also specify a locale when using the GraphQL API on the server with <code>runQuery</code>: </p>
<h3 id="Locale-Specific-Content"><a href="#Locale-Specific-Content" class="headerlink" title="Locale-Specific Content"></a>Locale-Specific Content</h3><p>In some cases, you’ll want to restrict some content to only be displayed in a specific locale. This is not yet supported, but PRs are welcome! [TODO]</p>
<h3 id="Search"><a href="#Search" class="headerlink" title="Search"></a>Search</h3><p>Search is not currently supported for internationalized content [TODO].</p>
<h2 id="Internationalizing-Emails"><a href="#Internationalizing-Emails" class="headerlink" title="Internationalizing Emails"></a>Internationalizing Emails</h2><p>Since emails are stored and sent on the server outside of the React component tree, their internationalization process is a little bit different. </p>
<h3 id="Setting-a-Locale"><a href="#Setting-a-Locale" class="headerlink" title="Setting a Locale"></a>Setting a Locale</h3><p>You can pass a <code>locale</code> option when sending email: </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">await</span> VulcanEmail.buildAndSend(&#123;</span><br><span class="line">  to: user.email,</span><br><span class="line">  emailName: <span class="string">'bookingsInquired'</span>,</span><br><span class="line">  variables: &#123; <span class="attr">documentId</span>: booking._id &#125;,</span><br><span class="line">  locale: <span class="string">'en'</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="Email-Templates"><a href="#Email-Templates" class="headerlink" title="Email Templates"></a>Email Templates</h3><p>Within an email template, internationalization strings are available as the <code>__</code> function: </p>
<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><span class="template-variable">&#123;&#123;__ "welcome_email_title"&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>If your i18n strings keys contain special characters (dots, spaces, etc.), you can escape them using the following <code>[...]</code> syntax:</p>
<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><span class="template-variable">&#123;&#123;__.[emails.inquiry_approved]&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>If you need to pass values to be replaced, you can also add an optional second argument: </p>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;__ <span class="string">"posts.create"</span> postValues&#125;&#125;</span><br></pre></td></tr></table></figure>


    </div>
  </div>

  <div class="pagination">
    <div class="content-wrapper">
      
      
        <a class="link primary prev" href="users.html">
          <span class="icon-arrow-left-alt"></span>
          <span class="subtitle-pagination">Previous</span>
          Users
        </a>
      
      
        <a class="link primary next" href="head-tags.html">
          <span class="subtitle-pagination">Next</span>
          Head Tags
          <span class="icon-arrow-right-alt"></span>
        </a>
      
    </div>
  </div>

  <div class="github">
    <a class="link tertiary " href="https://github.com/vulcanjs/vulcan-docs/tree/master/source/internationalization.md" target="_blank">
      <span class="icon-github"></span>Edit on GitHub</a>
  </div>

  
</div>

    <script src="/script/smooth-scroll.min.js"></script>
    <script src="/script/main.js"></script>
    <script>
      
    </script>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
    <script type="text/javascript"> docsearch({
      apiKey: 'ab091fbd89cda3abd54a35c4441b3e9b',
      indexName: 'vulcanjs',
      inputSelector: '#desktop-search-input',
      debug: true // Set debug to true if you want to inspect the dropdown
    });
    </script>

  </body>
</html>
