<!DOCTYPE html>
<html lang="en">
  <head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">

    <!-- Basic -->
    <title>Routing | Vulcan Docs</title>
    <meta name="description" content>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="images/favicon.ico" sizes="16x16 32x32 64x64">

    <!-- Social -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://docs.vulcanjs.org">
    <meta property="og:title" content="Routing | Vulcan Docs">
    <meta property="og:description" content>
    <meta property="og:image" content>
    <meta name="twitter:card" content="summary_image_large">
    <meta name="twitter:site" content="@vulcanjs">
    <meta name="twitter:title" content="Routing | Vulcan Docs">
    <meta name="twitter:description" content>
    <meta name="twitter:image" content>

    <!-- Misc -->
    <meta name="google-site-verification" content>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,200,300italic,400italic" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/style/style.css">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css">


  </head>
  <body class>
    

<div class="nav dark">
  <div class="nav-group">
    <div class="nav-item show-mobile">
      <span class="js-sidebar-toggle ">
        <span class="icon-menu"></span>
      </span>
    </div>
    <div class="nav-item">
      <a class="logo-wrapper" href="https://docs.vulcanjs.org/" title="Vulcan Documentation Vulcan Documentation">
        <img src="/images/vulcan-logo-border-2.svg" alt="Vulcan Documentation" class="logo">
        <span>Vulcan Documentation</span>
      </a>
    </div>
  </div>

  <div class="nav-group right">

    <div class="nav-item wrapper-search">
      <div class="input-symbol small round">
        <input type="text" placeholder="Search Vulcan Docs" id="desktop-search-input">
        <span class="icon-search"></span>
      </div>
      <div class="wrapper-desktop-search-results"></div>
    </div>

    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="https://github.com/vulcanjs/vulcan">
          <span>GitHub</span>
        </a>
      </div>
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="http://slack.vulcanjs.org">
          <span>Slack</span>
        </a>
      </div>
    
  </div>
</div>

<div class="sidebar">
  <div class="panel">
    <div class="panel-item">
      <a class href="https://docs.vulcanjs.org/" title="Vulcan Documentation">
        <span>Vulcan Documentation Vulcan Documentation</span>
      </a>
    </div>
    
      <div class="panel-item " ">
        <a class href="https://github.com/vulcanjs/vulcan">
          <span>GitHub</span>
        </a>
      </div>
    
      <div class="panel-item " ">
        <a class href="http://slack.vulcanjs.org">
          <span>Slack</span>
        </a>
      </div>
    
  </div>

  <div class="sidebar-content">
    <div class="topcap">
      
    </div>

    <ul class="toc">
      
        <li>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="index.html" class="sidebar-link ">
                  <span>Read Me</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="nutshell.html" class="sidebar-link ">
                  <span>Vulcan in a Nutshell</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="toc.html" class="sidebar-link ">
                  <span>Table of Contents</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Schemas</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="schemas.html" class="sidebar-link ">
                  <span>Schemas & Collections</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="schema-properties.html" class="sidebar-link ">
                  <span>Schema Properties</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="field-resolvers.html" class="sidebar-link ">
                  <span>Field Resolvers</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="relations.html" class="sidebar-link ">
                  <span>Relations</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">GraphQL API</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="graphql-schema.html" class="sidebar-link ">
                  <span>GraphQL Schema</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="queries.html" class="sidebar-link ">
                  <span>Queries</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="filtering.html" class="sidebar-link ">
                  <span>Filtering</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="mutations.html" class="sidebar-link ">
                  <span>Mutations</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="fragments.html" class="sidebar-link ">
                  <span>Fragments</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="server-queries.html" class="sidebar-link ">
                  <span>Querying on the Server</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="connecting-remotely.html" class="sidebar-link ">
                  <span>Connecting Remotely</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Features</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc  current">
                <a href class="sidebar-link  current">
                  <span>Routing</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="settings.html" class="sidebar-link ">
                  <span>Settings</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="groups-permissions.html" class="sidebar-link ">
                  <span>Groups & Permissions</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="callbacks.html" class="sidebar-link ">
                  <span>Callbacks</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="users.html" class="sidebar-link ">
                  <span>Users</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="internationalization.html" class="sidebar-link ">
                  <span>Internationalization</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="head-tags.html" class="sidebar-link ">
                  <span>Head Tags</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="errors.html" class="sidebar-link ">
                  <span>Errors & Messages</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Components</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="components.html" class="sidebar-link ">
                  <span>Components</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="ui-components.html" class="sidebar-link ">
                  <span>UI Components</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="datatable.html" class="sidebar-link ">
                  <span>Datatable</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="card.html" class="sidebar-link ">
                  <span>Card</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="forms-components.html" class="sidebar-link ">
                  <span>Form Components</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="other-components.html" class="sidebar-link ">
                  <span>Other Components</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Forms</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="forms.html" class="sidebar-link ">
                  <span>Forms</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="decorators.html" class="sidebar-link ">
                  <span>Field Decorators</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="forms-custom.html" class="sidebar-link ">
                  <span>Custom Form Components</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Server</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="performance.html" class="sidebar-link ">
                  <span>Performance</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="database.html" class="sidebar-link ">
                  <span>Database Layer</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Other Packages</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="packages.html" class="sidebar-link ">
                  <span>Packages Types</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="email.html" class="sidebar-link ">
                  <span>Email</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="events.html" class="sidebar-link ">
                  <span>Analytics & Event Tracking</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="error-tracking.html" class="sidebar-link ">
                  <span>Error Tracking</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="debug.html" class="sidebar-link ">
                  <span>Debugging</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Testing</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="unit-testing.html" class="sidebar-link ">
                  <span>Unit Testing</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="storybook.html" class="sidebar-link ">
                  <span>Storybook</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Resources</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="learn.html" class="sidebar-link ">
                  <span>Learn More</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="examples.html" class="sidebar-link ">
                  <span>Examples</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="common-problems.html" class="sidebar-link ">
                  <span>Common Problems</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="plugins.html" class="sidebar-link ">
                  <span>Plugins</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="themes.html" class="sidebar-link ">
                  <span>Themes</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="tutorials.html" class="sidebar-link ">
                  <span>Tutorials</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="videos.html" class="sidebar-link ">
                  <span>Videos</span>
                </a>
              </li>
            
          </ul>
        </li>
      
    </ul>
  </div>
</div>

<div class="content">
  <div class="content-wrapper">
    <div class="header-content">
      <h1 class="title-page">Routing</h1>
      

      <div class="page-actions">
        <div class="actions-group">
          <a class="btn tertiary small round lowercase" href="https://github.com/vulcanjs/vulcan-docs/tree/master/source/routing.md" target="_blank"><span class="icon-github"></span> <span>Edit on GitHub</span></a>
          
        </div>
      </div>
    </div>

    <div class="document-formatting">
      <h2 id="React-Router"><a href="#React-Router" class="headerlink" title="React Router"></a>React Router</h2><p>For routing we use React Router 4. You can find the docs at <a href="https://reacttraining.com/react-router/web/api/" target="_blank" rel="noopener">https://reacttraining.com/react-router/web/api/</a>.</p>
<h2 id="Linking-to-a-Route"><a href="#Linking-to-a-Route" class="headerlink" title="Linking to a Route"></a>Linking to a Route</h2><p>To create a link to a route, use React Router’s <code>&lt;Link&gt;</code> (and not the usual <code>&lt;a&gt;</code>):</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Link &#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span>;</span><br><span class="line"></span><br><span class="line">&lt;Link to=&#123;<span class="string">`/post/<span class="subst">$&#123;post._id&#125;</span>`</span>&#125;&gt;&#123;post.title&#125;&lt;<span class="regexp">/Link&gt;</span></span><br></pre></td></tr></table></figure>

<p>Note that you have to specify the route’s full path as the <code>to</code> prop, not its name. </p>
<h2 id="Adding-Routes"><a href="#Adding-Routes" class="headerlink" title="Adding Routes"></a>Adding Routes</h2><p>Here’s how you can add routes to your app (using React Router):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Foo <span class="keyword">from</span> <span class="string">'./foo.jsx'</span>;</span><br><span class="line"></span><br><span class="line">addRoute(&#123;</span><br><span class="line">  name: <span class="string">'foo'</span>,</span><br><span class="line">  path: <span class="string">'/foo'</span>,</span><br><span class="line">  component: Foo</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>If on the other hand you’ve previously registered a component with <code>registerComponent</code>, you can simply specify the <code>componentName</code> property instead:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">addRoute(&#123;</span><br><span class="line">  name: <span class="string">'foo'</span>,</span><br><span class="line">  path: <span class="string">'/'</span>,</span><br><span class="line">  componentName: <span class="string">'Foo'</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>Finally, to change the index (<code>/</code>) route, you can just do:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">addRoute(&#123;</span><br><span class="line">  name: <span class="string">'foo'</span>,</span><br><span class="line">  path: <span class="string">'/'</span>,</span><br><span class="line">  component: Foo</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="Child-Routes"><a href="#Child-Routes" class="headerlink" title="Child Routes"></a>Child Routes</h2><p>You can declare a new route as a child of an existing one using the following syntax:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">addRoute(&#123;</span><br><span class="line">  name: <span class="string">'foo'</span>,</span><br><span class="line">  path: <span class="string">'/'</span>,</span><br><span class="line">  component: Foo</span><br><span class="line">&#125;, <span class="string">'nameOfParentRoute'</span>);</span><br></pre></td></tr></table></figure>

<h2 id="Custom-Layouts"><a href="#Custom-Layouts" class="headerlink" title="Custom Layouts"></a>Custom Layouts</h2><p>By default, Vulcan will use the <code>Components.Layout</code> component as a layout. However, you can also specify a different layout on a per-route basis: </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">addRoute(&#123;</span><br><span class="line">  name: <span class="string">'foo'</span>,</span><br><span class="line">  path: <span class="string">'/'</span>,</span><br><span class="line">  component: Foo,</span><br><span class="line">  layoutName: <span class="string">'AdminLayout'</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>Note that this supposes you’ve previously registered the <code>AdminLayout</code> component using <code>registerComponent</code>.</p>
<h2 id="Dynamic-Imports"><a href="#Dynamic-Imports" class="headerlink" title="Dynamic Imports"></a>Dynamic Imports</h2><p>Vulcan supports dynamically loading specific routes, meaning their content will not be included in the original JavaScript bundle but instead will only be loaded when the user actually visits that route.</p>
<p>The following static route:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Admin <span class="keyword">from</span> <span class="string">'./Admin.jsx'</span>;</span><br><span class="line"></span><br><span class="line">addRoute(&#123;</span><br><span class="line">  name: <span class="string">'admin'</span>,</span><br><span class="line">  path: <span class="string">'/admin'</span>,</span><br><span class="line">  component: Admin</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>Can be changed to a dynamic route using <code>getDynamicComponent</code> and <code>import(...)</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getDynamicComponent &#125; <span class="keyword">from</span> <span class="string">'meteor/vulcan:core'</span>;</span><br><span class="line"></span><br><span class="line">addRoute(&#123;</span><br><span class="line">  name: <span class="string">'admin'</span>,</span><br><span class="line">  path: <span class="string">'/admin'</span>,</span><br><span class="line">  component: <span class="function"><span class="params">()</span> =&gt;</span> getDynamicComponent(<span class="keyword">import</span>(<span class="string">'./Admin.jsx'</span>))</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>Note that components are imported as soon as the <code>import()</code> statement runs. This is why it’s important to wrap the <code>getDynamicComponent()</code> block in a function call (<code>() =&gt; ...</code>) to delay its execution and ensure dynamic components are not loaded prematurely. </p>
<p>Learn more about <a href="https://blog.meteor.com/announcing-meteor-1-5-b82be66571bb" target="_blank" rel="noopener">dynamic imports here</a>.</p>
<h2 id="Overriding-Routes"><a href="#Overriding-Routes" class="headerlink" title="Overriding Routes"></a>Overriding Routes</h2><p>You might sometimes need to override an existing route from another package. To do so, you can simply redeclare a route of the same name. If this is not possible for some reason (for example, it’s a dynamically loaded route that uses a local path), you can also override specific route properties like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; RoutesTable &#125; <span class="keyword">from</span> <span class="string">'meteor/vulcan:core'</span>;</span><br><span class="line"></span><br><span class="line">RoutesTable.admin.layoutName = <span class="string">'AdminLayout'</span>;</span><br></pre></td></tr></table></figure>

<h2 id="Callbacks"><a href="#Callbacks" class="headerlink" title="Callbacks"></a>Callbacks</h2><p>Vulcan uses server-side and client-side hooks to allow for manipulation of server rendered markup and state, both before and after rendering. You can access these hooks by calling the <a href="callbacks.html#Adding-Callback-Functions"><code>addCallback</code></a> function. Some examples:</p>
<h4 id="Wrap-the-app-in-a-custom-container"><a href="#Wrap-the-app-in-a-custom-container" class="headerlink" title="Wrap the app in a custom container"></a>Wrap the app in a custom container</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addWrapper</span>(<span class="params">app, &#123; req, res, store, apolloClient &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Wrap the app with a custom container</span></span><br><span class="line">  <span class="keyword">const</span> state = store.getState();</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;CustomContainer theme=&#123;state.theme&#125;&gt;</span><br><span class="line">      &#123;app&#125;</span><br><span class="line">    &lt;<span class="regexp">/CustomContainer&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">if (Meteor.isServer) &#123;</span></span><br><span class="line"><span class="regexp">  addCallback('router.server.wrapper', addWrapper);</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>


<h4 id="Initialise-a-custom-state"><a href="#Initialise-a-custom-state" class="headerlink" title="Initialise a custom state"></a>Initialise a custom state</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dehydrate</span>(<span class="params">context, &#123; req &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> host = req.headers.host;</span><br><span class="line">  context.apolloClient.store.dispatch(&#123;</span><br><span class="line">    type: <span class="string">'SUBSITEINIT'</span>,</span><br><span class="line">    payload: Subsites.findOne(&#123; host &#125;),</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> context;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">rehydrate</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; store, initialState &#125; = obj;</span><br><span class="line">  store.dispatch(&#123;</span><br><span class="line">    type: <span class="string">'SUBSITEINIT'</span>,</span><br><span class="line">    payload: (initialState &amp;&amp; initialState.subsite) ?  initialState.subsite.config : <span class="literal">null</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (Meteor.isServer) &#123;</span><br><span class="line">  addCallback(<span class="string">'router.server.dehydrate'</span>, dehydrate);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  addCallback(<span class="string">'router.client.rehydrate'</span>, rehydrate);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Be sure you’re receiving and returning the expected values by checking the <a href="https://github.com/VulcanJS/Vulcan/blob/master/packages/vulcan-routing/lib/server/routing.jsx" target="_blank" rel="noopener">server</a> and <a href="https://github.com/VulcanJS/Vulcan/blob/master/packages/vulcan-routing/lib/client/routing.jsx" target="_blank" rel="noopener">client</a> <code>vulcan:routing</code> source files (where you can also find the full list of callback strings available).</p>
<h3 id="Update-callbacks"><a href="#Update-callbacks" class="headerlink" title="Update callbacks"></a>Update callbacks</h3><p>A common pattern with React Router is running callbacks after the route update (to enable things like custom scrolling behavior, for example). You can use the <code>router.onUpdate</code> callback hook to add your own callbacks:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">addCallback(<span class="string">'router.onUpdate'</span>, sendGoogleAnalyticsRequest);</span><br></pre></td></tr></table></figure>

<h2 id="Accessing-React-Router"><a href="#Accessing-React-Router" class="headerlink" title="Accessing React Router"></a>Accessing React Router</h2><p>If you need to access router properties (such as the current route, path, or query parameters) inside a component, you’ll need to wrap that component with the <code>withRouter</code> HoC (higher-order component):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; withRouter &#125; <span class="keyword">from</span> <span class="string">'react-router'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SearchForm</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="comment">// this.props.currentRoute is accessible</span></span><br><span class="line">    <span class="comment">// this.props.history is accessible</span></span><br><span class="line">    <span class="comment">// this.props.location is accessible</span></span><br><span class="line">    <span class="comment">// this.props.match is accessible</span></span><br><span class="line">    <span class="comment">// this.props.match.params is an object with the route params</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SearchForm.propTypes = &#123;</span><br><span class="line">  currentRoute: PropTypes.object.isRequired,</span><br><span class="line">  history: PropTypes.object.isRequired,</span><br><span class="line">  location: PropTypes.object.isRequired,</span><br><span class="line">  match: PropTypes.object.isRequired,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> withRouter(SearchForm);</span><br></pre></td></tr></table></figure>

<h4 id="Alternative-Approach"><a href="#Alternative-Approach" class="headerlink" title="Alternative Approach"></a>Alternative Approach</h4><p>React Router is initialized in the <code>vulcan:routing</code> package, and the routing API lets you add routes without having to modify the package’s code. However, for more complex router customizations you can also disable the <code>vulcan:routing</code> package altogether and replace it with your own React Router code. </p>
<h2 id="Authentication-amp-Redirection"><a href="#Authentication-amp-Redirection" class="headerlink" title="Authentication &amp; Redirection"></a>Authentication &amp; Redirection</h2><p>Authentication and redirection rely on having access to the current user object; and since data loading is handled at the component level in Vulcan, so are they.</p>
<p>To make things easier, Vulcan provides a <code>withAccess</code> HoC:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; withAccess &#125; <span class="keyword">from</span> <span class="string">'meteor/vulcan:core'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Dashboard = <span class="function"><span class="params">()</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"dashboard"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> accessOptions = &#123;</span><br><span class="line">  groups: [<span class="string">'admins'</span>],</span><br><span class="line">  redirect: <span class="string">'/sign-up'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">registerComponent(<span class="string">'Dashboard'</span>, Dashboard, [withAccess, accessOptions]);</span><br></pre></td></tr></table></figure>

<p>The HoC takes two options: </p>
<ul>
<li><code>groups</code>: an array of group names to limit who can access the component. If not specified, will default to requiring any logged-in user.</li>
<li><code>redirect</code>: an optional path to redirect the user to if the <code>groups</code> check fails.</li>
<li><code>failureComponentName</code>: an optional registered component’s name to display if the <code>groups</code> check fails.</li>
<li><code>failureComponent</code>: an optional React component to display if the <code>groups</code> check fails.</li>
</ul>
<h3 id="Manual-Redirects"><a href="#Manual-Redirects" class="headerlink" title="Manual Redirects"></a>Manual Redirects</h3><p>Behind the scenes, this is equivalent to using <code>withCurrentUser</code> and <code>withRouter</code> to access <code>currentUser</code> and <code>router</code> inside a component’s <code>constructor</code>. For example, here is how you would redirect non-logged-in users to the <code>/sign-up</code> route when they try to access the <code>/dashboard</code> component: </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; PureComponent &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; registerComponent, withCurrentUser &#125; <span class="keyword">from</span> <span class="string">'meteor/vulcan:core'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; withRouter &#125; <span class="keyword">from</span> <span class="string">'react-router'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dashboard</span> <span class="keyword">extends</span> <span class="title">PureComponent</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">if</span>(!props.currentUser) &#123;</span><br><span class="line">      props.history.push(<span class="string">'/sign-up'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">"dashboard"</span>&gt;</span><br><span class="line">        ...</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">registerComponent('Dashboard', Dashboard, withCurrentUser, withRouter);</span></span><br></pre></td></tr></table></figure>


    </div>
  </div>

  <div class="pagination">
    <div class="content-wrapper">
      
      
        <a class="link primary prev" href="connecting-remotely.html">
          <span class="icon-arrow-left-alt"></span>
          <span class="subtitle-pagination">Previous</span>
          Connecting Remotely
        </a>
      
      
        <a class="link primary next" href="settings.html">
          <span class="subtitle-pagination">Next</span>
          Settings
          <span class="icon-arrow-right-alt"></span>
        </a>
      
    </div>
  </div>

  <div class="github">
    <a class="link tertiary " href="https://github.com/vulcanjs/vulcan-docs/tree/master/source/routing.md" target="_blank">
      <span class="icon-github"></span>Edit on GitHub</a>
  </div>

  
</div>

    <script src="/script/smooth-scroll.min.js"></script>
    <script src="/script/main.js"></script>
    <script>
      
    </script>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
    <script type="text/javascript"> docsearch({
      apiKey: 'ab091fbd89cda3abd54a35c4441b3e9b',
      indexName: 'vulcanjs',
      inputSelector: '#desktop-search-input',
      debug: true // Set debug to true if you want to inspect the dropdown
    });
    </script>

  </body>
</html>
